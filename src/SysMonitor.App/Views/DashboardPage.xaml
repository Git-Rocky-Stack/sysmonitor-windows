<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SysMonitor.App.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Padding="0,0,0,24" Spacing="24">
            <!-- Header -->
            <TextBlock Text="Dashboard" Style="{StaticResource PageHeaderStyle}"/>

            <!-- Health Score Card -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="System Health" Style="{StaticResource SectionHeaderStyle}"/>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="{x:Bind ViewModel.HealthScore, Mode=OneWay}"
                                       Style="{StaticResource StatValueStyle}"/>
                            <TextBlock Text="/100" VerticalAlignment="Bottom" Margin="0,0,0,6"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        <TextBlock Text="{x:Bind ViewModel.HealthStatus, Mode=OneWay}"
                                   Style="{StaticResource StatLabelStyle}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                        <Button Content="Quick Clean" Command="{x:Bind ViewModel.QuickCleanCommand}"
                                IsEnabled="{x:Bind ViewModel.IsOptimizing, Mode=OneWay, Converter={StaticResource InvertBoolConverter}}"/>
                        <Button Content="Optimize Memory" Command="{x:Bind ViewModel.OptimizeMemoryCommand}"
                                Style="{StaticResource AccentButtonStyle}"
                                IsEnabled="{x:Bind ViewModel.IsOptimizing, Mode=OneWay, Converter={StaticResource InvertBoolConverter}}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Stats Grid -->
            <TextBlock Text="System Resources" Style="{StaticResource SectionHeaderStyle}"/>
            <Grid ColumnSpacing="16" RowSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- CPU -->
                <Border Grid.Column="0" Style="{StaticResource StatCardStyle}">
                    <StackPanel>
                        <TextBlock Text="CPU" Style="{StaticResource StatLabelStyle}"/>
                        <TextBlock Style="{StaticResource StatValueStyle}">
                            <Run Text="{x:Bind ViewModel.CpuUsage, Mode=OneWay, Converter={StaticResource PercentConverter}}"/>
                            <Run Text="%" FontSize="18"/>
                        </TextBlock>
                        <ProgressBar Value="{x:Bind ViewModel.CpuUsage, Mode=OneWay}" Maximum="100" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Memory -->
                <Border Grid.Column="1" Style="{StaticResource StatCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Memory" Style="{StaticResource StatLabelStyle}"/>
                        <TextBlock Style="{StaticResource StatValueStyle}">
                            <Run Text="{x:Bind ViewModel.MemoryUsage, Mode=OneWay, Converter={StaticResource PercentConverter}}"/>
                            <Run Text="%" FontSize="18"/>
                        </TextBlock>
                        <ProgressBar Value="{x:Bind ViewModel.MemoryUsage, Mode=OneWay}" Maximum="100" Margin="0,8,0,0"/>
                        <TextBlock Style="{StaticResource StatLabelStyle}" Margin="0,4,0,0">
                            <Run Text="{x:Bind ViewModel.MemoryUsedGB, Mode=OneWay, Converter={StaticResource GBConverter}}"/>
                            <Run Text="/"/>
                            <Run Text="{x:Bind ViewModel.MemoryTotalGB, Mode=OneWay, Converter={StaticResource GBConverter}}"/>
                            <Run Text="GB"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Disk -->
                <Border Grid.Column="2" Style="{StaticResource StatCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Disk (C:)" Style="{StaticResource StatLabelStyle}"/>
                        <TextBlock Style="{StaticResource StatValueStyle}">
                            <Run Text="{x:Bind ViewModel.DiskUsage, Mode=OneWay, Converter={StaticResource PercentConverter}}"/>
                            <Run Text="%" FontSize="18"/>
                        </TextBlock>
                        <ProgressBar Value="{x:Bind ViewModel.DiskUsage, Mode=OneWay}" Maximum="100" Margin="0,8,0,0"/>
                        <TextBlock Style="{StaticResource StatLabelStyle}" Margin="0,4,0,0">
                            <Run Text="{x:Bind ViewModel.DiskUsedGB, Mode=OneWay, Converter={StaticResource GBConverter}}"/>
                            <Run Text="/"/>
                            <Run Text="{x:Bind ViewModel.DiskTotalGB, Mode=OneWay, Converter={StaticResource GBConverter}}"/>
                            <Run Text="GB"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Battery -->
                <Border Grid.Column="3" Style="{StaticResource StatCardStyle}"
                        Visibility="{x:Bind ViewModel.HasBattery, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                    <StackPanel>
                        <TextBlock Text="Battery" Style="{StaticResource StatLabelStyle}"/>
                        <TextBlock Style="{StaticResource StatValueStyle}">
                            <Run Text="{x:Bind ViewModel.BatteryLevel, Mode=OneWay}"/>
                            <Run Text="%" FontSize="18"/>
                        </TextBlock>
                        <ProgressBar Value="{x:Bind ViewModel.BatteryLevel, Mode=OneWay}" Maximum="100" Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- System Info -->
            <TextBlock Text="System Information" Style="{StaticResource SectionHeaderStyle}"/>
            <Border Style="{StaticResource CardStyle}">
                <Grid ColumnSpacing="48">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock><Run Text="OS: " Foreground="{ThemeResource TextFillColorSecondaryBrush}"/><Run Text="{x:Bind ViewModel.OsName, Mode=OneWay}"/></TextBlock>
                        <TextBlock><Run Text="Uptime: " Foreground="{ThemeResource TextFillColorSecondaryBrush}"/><Run Text="{x:Bind ViewModel.Uptime, Mode=OneWay}"/></TextBlock>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Spacing="8">
                        <TextBlock><Run Text="Cleanable Space: " Foreground="{ThemeResource TextFillColorSecondaryBrush}"/><Run Text="{x:Bind ViewModel.CleanableSpaceMB, Mode=OneWay, Converter={StaticResource MBConverter}}"/></TextBlock>
                    </StackPanel>
                </Grid>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
