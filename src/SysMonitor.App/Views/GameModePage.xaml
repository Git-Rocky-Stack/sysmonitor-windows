<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SysMonitor.App.Views.GameModePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:SysMonitor.Core.Models"
    Background="{StaticResource BackgroundBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid RowSpacing="16" Padding="0,0,0,24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Page Header Banner -->
            <Border Grid.Row="0" Background="#000000" Padding="24" Margin="-24,-24,-24,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" VerticalAlignment="Center" Spacing="4">
                        <TextBlock Text="GAME MODE" Style="{StaticResource PageHeaderStyle}"
                                   Foreground="{StaticResource PrimaryBrush}" HorizontalAlignment="Left"/>
                        <TextBlock Text="Optimize Your System for Gaming" Style="{StaticResource PageSubtitleStyle}"
                                   Foreground="#AAFFFFFF" HorizontalAlignment="Left"/>
                    </StackPanel>

                    <Image Grid.Column="1" Source="ms-appx:///Assets/Home_Logo.png"
                           Height="80" VerticalAlignment="Center" HorizontalAlignment="Center" Stretch="Uniform"/>
                </Grid>
            </Border>

            <!-- Main Toggle Section -->
            <StackPanel Grid.Row="1" Spacing="12">
                <StackPanel Style="{StaticResource SectionHeaderWithAccentStyle}">
                    <Border Style="{StaticResource AccentBarStyle}" Height="20"/>
                    <TextBlock Text="GAME MODE CONTROL" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                </StackPanel>

                <Border Style="{StaticResource CardStyle}">
                    <Grid Padding="16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Status Display -->
                        <StackPanel Grid.Column="0" VerticalAlignment="Center" Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Grid Width="60" Height="60">
                                    <!-- Outer glow -->
                                    <Ellipse Fill="Transparent" StrokeThickness="3" Opacity="0.3">
                                        <Ellipse.Stroke>
                                            <SolidColorBrush Color="{x:Bind ViewModel.StatusColor, Mode=OneWay}"/>
                                        </Ellipse.Stroke>
                                    </Ellipse>
                                    <!-- Inner circle with icon -->
                                    <Border CornerRadius="30" Margin="8">
                                        <Border.Background>
                                            <SolidColorBrush Color="{x:Bind ViewModel.StatusColor, Mode=OneWay}" Opacity="0.2"/>
                                        </Border.Background>
                                        <FontIcon Glyph="&#xE7FC;" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <FontIcon.Foreground>
                                                <SolidColorBrush Color="{x:Bind ViewModel.StatusColor, Mode=OneWay}"/>
                                            </FontIcon.Foreground>
                                        </FontIcon>
                                    </Border>
                                </Grid>

                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                                               FontSize="24" FontWeight="Bold" Foreground="{StaticResource TextPrimaryBrush}"/>
                                    <TextBlock Text="Click the button to toggle" FontSize="13"
                                               Foreground="{StaticResource TextSecondaryBrush}"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>

                        <!-- Toggle Button -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <Border CornerRadius="26" Padding="2">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#707070" Offset="0.0"/>
                                        <GradientStop Color="#C0C0C0" Offset="0.3"/>
                                        <GradientStop Color="#FFFFFF" Offset="0.5"/>
                                        <GradientStop Color="#C0C0C0" Offset="0.7"/>
                                        <GradientStop Color="#505050" Offset="1.0"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Button Command="{x:Bind ViewModel.ToggleGameModeCommand}"
                                        IsEnabled="{x:Bind ViewModel.IsActivating, Mode=OneWay, Converter={StaticResource InvertBoolConverter}}"
                                        Style="{StaticResource RedButtonStyle}"
                                        Width="200" Height="50">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon Glyph="{x:Bind ViewModel.IsGameModeEnabled, Mode=OneWay, Converter={StaticResource GameModeIconConverter}}"
                                                  FontSize="16"/>
                                        <TextBlock Text="{x:Bind ViewModel.IsGameModeEnabled, Mode=OneWay, Converter={StaticResource GameModeTextConverter}}"
                                                   FontWeight="SemiBold"/>
                                    </StackPanel>
                                </Button>
                            </Border>
                            <ProgressRing IsActive="{x:Bind ViewModel.IsActivating, Mode=OneWay}"
                                          Width="24" Height="24" Margin="0,8,0,0"
                                          Foreground="{StaticResource PrimaryBrush}"
                                          Visibility="{x:Bind ViewModel.IsActivating, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </StackPanel>

            <!-- Advanced Features Grid (4 Cards) -->
            <StackPanel Grid.Row="2" Spacing="12">
                <StackPanel Style="{StaticResource SectionHeaderWithAccentStyle}">
                    <Border Style="{StaticResource AccentBarStyle}" Height="20"/>
                    <TextBlock Text="ADVANCED FEATURES" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                </StackPanel>

                <Grid ColumnSpacing="16" RowSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Auto Game Mode Card -->
                    <Border Grid.Column="0" Style="{StaticResource CardStyle}" Padding="16">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <Border Style="{StaticResource IconContainerStyle}" Width="40" Height="40">
                                    <FontIcon Glyph="&#xE7FC;" FontSize="18" Foreground="{StaticResource PrimaryBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="AUTO MODE" Style="{StaticResource CardTitleStyle}" FontWeight="Bold"/>
                                    <TextBlock Text="Auto-detect games" Style="{StaticResource CardSubtitleStyle}" FontSize="11"/>
                                </StackPanel>
                            </StackPanel>

                            <ToggleSwitch IsOn="{x:Bind ViewModel.AutoModeEnabled, Mode=TwoWay}"
                                          OnContent="Enabled" OffContent="Disabled"
                                          Margin="0"/>

                            <TextBlock Text="{x:Bind ViewModel.DetectedGamesText, Mode=OneWay}"
                                       FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                        </StackPanel>
                    </Border>

                    <!-- Performance Profiles Card -->
                    <Border Grid.Column="1" Style="{StaticResource CardStyle}" Padding="16">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <Border Style="{StaticResource IconContainerStyle}" Width="40" Height="40">
                                    <FontIcon Glyph="&#xE9D5;" FontSize="18" Foreground="{StaticResource WarningBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="PROFILES" Style="{StaticResource CardTitleStyle}" FontWeight="Bold"/>
                                    <TextBlock Text="Optimization presets" Style="{StaticResource CardSubtitleStyle}" FontSize="11"/>
                                </StackPanel>
                            </StackPanel>

                            <ComboBox ItemsSource="{x:Bind ViewModel.Profiles, Mode=OneWay}"
                                      SelectedItem="{x:Bind ViewModel.SelectedProfile, Mode=TwoWay}"
                                      DisplayMemberPath="Name"
                                      PlaceholderText="Select profile"
                                      HorizontalAlignment="Stretch"/>

                            <Grid ColumnSpacing="8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" Content="Apply"
                                        Command="{x:Bind ViewModel.ApplyProfileCommand}"
                                        CommandParameter="{x:Bind ViewModel.SelectedProfile, Mode=OneWay}"
                                        HorizontalAlignment="Stretch"
                                        Style="{StaticResource AccentButtonStyle}"/>
                                <Button Grid.Column="1" Content="Clear"
                                        Command="{x:Bind ViewModel.DeactivateProfileCommand}"
                                        IsEnabled="{x:Bind ViewModel.HasActiveProfile, Mode=OneWay}"
                                        HorizontalAlignment="Stretch"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- FPS Overlay Card -->
                    <Border Grid.Column="2" Style="{StaticResource CardStyle}" Padding="20">
                        <StackPanel Spacing="10">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <Border Style="{StaticResource IconContainerStyle}" Width="40" Height="40">
                                    <FontIcon Glyph="&#xE7F4;" FontSize="18" Foreground="{StaticResource SuccessBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="FPS OVERLAY" Style="{StaticResource CardTitleStyle}" FontWeight="Bold"/>
                                    <TextBlock Text="F1 Telemetry HUD" Style="{StaticResource CardSubtitleStyle}" FontSize="11"/>
                                </StackPanel>
                            </StackPanel>

                            <Border CornerRadius="18" Padding="2" Margin="0,0,0,6">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#707070" Offset="0.0"/>
                                        <GradientStop Color="#C0C0C0" Offset="0.3"/>
                                        <GradientStop Color="#FFFFFF" Offset="0.5"/>
                                        <GradientStop Color="#C0C0C0" Offset="0.7"/>
                                        <GradientStop Color="#505050" Offset="1.0"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Button Command="{x:Bind ViewModel.ToggleOverlayCommand}"
                                        Content="{x:Bind ViewModel.OverlayButtonText, Mode=OneWay}"
                                        Style="{StaticResource RedButtonStyle}"
                                        HorizontalAlignment="Stretch" Height="42" CornerRadius="16"/>
                            </Border>

                            <StackPanel Spacing="4" Margin="0,4,0,0">
                                <TextBlock Text="Drag overlay to reposition"
                                           FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"
                                           HorizontalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="2">
                                    <FontIcon Glyph="&#xE7C2;" FontSize="10" Foreground="{StaticResource TextSecondaryBrush}"/>
                                    <TextBlock Text="Click &amp; drag anywhere"
                                               FontSize="10" Foreground="{StaticResource TextSecondaryBrush}" Opacity="0.7"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- RAM Cache Card -->
                    <Border Grid.Column="3" Style="{StaticResource CardStyle}" Padding="16">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <Border Style="{StaticResource IconContainerStyle}" Width="40" Height="40">
                                    <FontIcon Glyph="&#xE964;" FontSize="18" Foreground="{StaticResource InfoBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="RAM CACHE" Style="{StaticResource CardTitleStyle}" FontWeight="Bold"/>
                                    <TextBlock Text="Fast temp storage" Style="{StaticResource CardSubtitleStyle}" FontSize="11"/>
                                </StackPanel>
                            </StackPanel>

                            <ToggleSwitch IsOn="{x:Bind ViewModel.RamCacheEnabled, Mode=OneWay}"
                                          Toggled="RamCacheToggle_Toggled"
                                          OnContent="Enabled" OffContent="Disabled"
                                          Margin="0"/>

                            <StackPanel Spacing="4">
                                <TextBlock Text="{x:Bind ViewModel.RamCacheStatus, Mode=OneWay}"
                                           FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                                <ProgressBar Value="{x:Bind ViewModel.RamCacheUsagePercent, Mode=OneWay}"
                                             Maximum="100" Height="4"
                                             Foreground="{StaticResource InfoBrush}"/>
                            </StackPanel>

                            <Button Content="Clear Cache"
                                    Command="{x:Bind ViewModel.ClearRamCacheCommand}"
                                    IsEnabled="{x:Bind ViewModel.RamCacheEnabled, Mode=OneWay}"
                                    HorizontalAlignment="Stretch"
                                    FontSize="11"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </StackPanel>

            <!-- System Monitoring Section -->
            <StackPanel Grid.Row="3" Spacing="12">
                <StackPanel Style="{StaticResource SectionHeaderWithAccentStyle}">
                    <Border Style="{StaticResource AccentBarStyle}" Height="20"/>
                    <TextBlock Text="SYSTEM MONITORING" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                </StackPanel>

                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Fan Speed Widget -->
                    <Border Grid.Column="0" Style="{StaticResource CardStyle}" Padding="20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Header -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12">
                                <Border Style="{StaticResource IconContainerStyle}" Width="48" Height="48">
                                    <FontIcon Glyph="&#xE9CA;" FontSize="22" Foreground="{StaticResource SuccessBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="FAN SPEEDS" Style="{StaticResource CardTitleStyle}" FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Text="Real-time cooling status" Style="{StaticResource CardSubtitleStyle}"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Fan Speed Display -->
                            <Grid Grid.Row="1" Margin="0,16,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- CPU Fan -->
                                <StackPanel Grid.Column="0" HorizontalAlignment="Center" Spacing="8">
                                    <Grid Width="80" Height="80">
                                        <!-- Outer ring -->
                                        <Ellipse Stroke="#40FFFFFF" StrokeThickness="3"/>
                                        <!-- Progress ring background -->
                                        <Ellipse Stroke="{StaticResource CardBrush}" StrokeThickness="6" Margin="4"/>
                                        <!-- Progress ring -->
                                        <Ellipse x:Name="CpuFanRing" Stroke="#FF00FF00" StrokeThickness="6" Margin="4"
                                                 StrokeDashArray="4,2" RenderTransformOrigin="0.5,0.5">
                                            <Ellipse.RenderTransform>
                                                <RotateTransform Angle="0"/>
                                            </Ellipse.RenderTransform>
                                        </Ellipse>
                                        <!-- Center icon -->
                                        <FontIcon Glyph="&#xE9CA;" FontSize="24" Foreground="{StaticResource TextPrimaryBrush}"
                                                  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock x:Name="CpuFanSpeedText" Text="N/A"
                                                   FontSize="14" FontWeight="Bold" FontFamily="Consolas"
                                                   Foreground="{StaticResource TextPrimaryBrush}" HorizontalAlignment="Center"/>
                                        <TextBlock Text="CPU Fan" FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- System Fan -->
                                <StackPanel Grid.Column="1" HorizontalAlignment="Center" Spacing="8">
                                    <Grid Width="80" Height="80">
                                        <Ellipse Stroke="#40FFFFFF" StrokeThickness="3"/>
                                        <Ellipse Stroke="{StaticResource CardBrush}" StrokeThickness="6" Margin="4"/>
                                        <Ellipse x:Name="SysFanRing" Stroke="#FF00BFFF" StrokeThickness="6" Margin="4"
                                                 StrokeDashArray="4,2" RenderTransformOrigin="0.5,0.5">
                                            <Ellipse.RenderTransform>
                                                <RotateTransform Angle="0"/>
                                            </Ellipse.RenderTransform>
                                        </Ellipse>
                                        <FontIcon Glyph="&#xE9CA;" FontSize="24" Foreground="{StaticResource TextPrimaryBrush}"
                                                  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Grid>
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock x:Name="SysFanSpeedText" Text="N/A"
                                                   FontSize="14" FontWeight="Bold" FontFamily="Consolas"
                                                   Foreground="{StaticResource TextPrimaryBrush}" HorizontalAlignment="Center"/>
                                        <TextBlock Text="System Fan" FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>

                            <!-- Info Panel with clickable link -->
                            <StackPanel Grid.Row="2" Spacing="8" Margin="0,12,0,0">
                                <Border Background="#20FFFFFF" CornerRadius="6" Padding="12,8">
                                    <StackPanel Spacing="4">
                                        <StackPanel Orientation="Horizontal" Spacing="6">
                                            <FontIcon Glyph="&#xE946;" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                                            <TextBlock Text="Hardware sensor support required"
                                                       FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"/>
                                        </StackPanel>
                                        <TextBlock Text="Your system must expose fan sensors to display readings here."
                                                   FontSize="10" Foreground="{StaticResource TextSecondaryBrush}"
                                                   TextWrapping="Wrap" Opacity="0.7"/>
                                    </StackPanel>
                                </Border>
                                <HyperlinkButton Content="View available hardware sensors"
                                                 Click="ViewSensors_Click"
                                                 HorizontalAlignment="Center"
                                                 FontSize="11"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- System Power Widget -->
                    <Border Grid.Column="1" Style="{StaticResource CardStyle}" Padding="20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Header -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12">
                                <Border Style="{StaticResource IconContainerStyle}" Width="48" Height="48">
                                    <FontIcon Glyph="&#xEA91;" FontSize="22" Foreground="{StaticResource WarningBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="POWER DRAW" Style="{StaticResource CardTitleStyle}" FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Text="Real-time wattage" Style="{StaticResource CardSubtitleStyle}"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Power Display -->
                            <Grid Grid.Row="1" Margin="0,16,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- CPU Power -->
                                <StackPanel Grid.Column="0" HorizontalAlignment="Center" Spacing="4">
                                    <Border Background="{StaticResource CardBrush}" CornerRadius="8" Padding="12,8">
                                        <StackPanel HorizontalAlignment="Center">
                                            <TextBlock x:Name="CpuPowerText" Text="--W"
                                                       FontSize="24" FontWeight="Bold" FontFamily="Consolas"
                                                       Foreground="#FFFFA500" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                    <TextBlock Text="CPU" FontSize="11" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                </StackPanel>

                                <!-- GPU Power -->
                                <StackPanel Grid.Column="1" HorizontalAlignment="Center" Spacing="4">
                                    <Border Background="{StaticResource CardBrush}" CornerRadius="8" Padding="12,8">
                                        <StackPanel HorizontalAlignment="Center">
                                            <TextBlock x:Name="GpuPowerText" Text="--W"
                                                       FontSize="24" FontWeight="Bold" FontFamily="Consolas"
                                                       Foreground="#FF00BFFF" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                    <TextBlock Text="GPU" FontSize="11" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                </StackPanel>

                                <!-- Total Power -->
                                <StackPanel Grid.Column="2" HorizontalAlignment="Center" Spacing="4">
                                    <Border CornerRadius="8" Padding="12,8">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#30FF6600" Offset="0"/>
                                                <GradientStop Color="#20FF0000" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <StackPanel HorizontalAlignment="Center">
                                            <TextBlock x:Name="TotalPowerText" Text="--W"
                                                       FontSize="24" FontWeight="Bold" FontFamily="Consolas"
                                                       Foreground="#FFFF6600" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                    <TextBlock Text="TOTAL" FontSize="11" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </StackPanel>

            <!-- What Game Mode Does -->
            <Grid Grid.Row="4" ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- When Enabled Info -->
                <StackPanel Grid.Column="0" Spacing="8">
                    <StackPanel Style="{StaticResource SectionHeaderWithAccentStyle}">
                        <Border Style="{StaticResource AccentBarStyle}" Height="20"/>
                        <TextBlock Text="WHEN ENABLED" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                    </StackPanel>

                    <Border Style="{StaticResource CardStyle}" Padding="16">
                        <StackPanel Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Border Style="{StaticResource IconContainerStyle}" Width="36" Height="36">
                                    <FontIcon Glyph="&#xE71A;" FontSize="16" Foreground="{StaticResource ErrorBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="Closes Background Apps" Style="{StaticResource CardTitleStyle}"/>
                                    <TextBlock Text="Browsers, Discord, Spotify, etc." Style="{StaticResource CardSubtitleStyle}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Border Style="{StaticResource IconContainerStyle}" Width="36" Height="36">
                                    <FontIcon Glyph="&#xE945;" FontSize="16" Foreground="{StaticResource WarningBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="High Performance Mode" Style="{StaticResource CardTitleStyle}"/>
                                    <TextBlock Text="Sets Windows to High Performance power plan" Style="{StaticResource CardSubtitleStyle}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Border Style="{StaticResource IconContainerStyle}" Width="36" Height="36">
                                    <FontIcon Glyph="&#xE74C;" FontSize="16" Foreground="{StaticResource SuccessBrush}"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="Frees Up RAM" Style="{StaticResource CardTitleStyle}"/>
                                    <TextBlock Text="Optimizes memory for gaming" Style="{StaticResource CardSubtitleStyle}"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Last Session Info -->
                <StackPanel Grid.Column="1" Spacing="8">
                    <StackPanel Style="{StaticResource SectionHeaderWithAccentStyle}">
                        <Border Style="{StaticResource AccentBarStyle}" Height="20"/>
                        <TextBlock Text="LAST SESSION" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                    </StackPanel>

                    <Border Style="{StaticResource CardStyle}" Padding="16"
                            Visibility="{x:Bind ViewModel.HasLastSession, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                        <StackPanel Spacing="16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                    <TextBlock Text="{x:Bind ViewModel.LastProcessesKilled, Mode=OneWay}"
                                               FontSize="36" FontWeight="Bold" HorizontalAlignment="Center"
                                               Foreground="{StaticResource PrimaryBrush}"/>
                                    <TextBlock Text="Processes Killed" FontSize="12"
                                               Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                                    <TextBlock Text="{x:Bind ViewModel.LastMemoryFreed, Mode=OneWay}"
                                               FontSize="36" FontWeight="Bold" HorizontalAlignment="Center"
                                               Foreground="{StaticResource SuccessBrush}"/>
                                    <TextBlock Text="RAM Freed" FontSize="12"
                                               Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Grid>

                            <!-- Killed Apps List -->
                            <StackPanel Visibility="{x:Bind ViewModel.KilledApps.Count, Mode=OneWay, Converter={StaticResource CountToVisibilityConverter}}">
                                <TextBlock Text="Closed Applications:" FontSize="12" FontWeight="SemiBold"
                                           Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,8"/>
                                <ItemsControl ItemsSource="{x:Bind ViewModel.KilledApps, Mode=OneWay}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal" Spacing="8"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="x:String">
                                            <Border Background="{StaticResource CardBrush}" CornerRadius="4" Padding="8,4">
                                                <TextBlock Text="{x:Bind}" FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"/>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Border Style="{StaticResource CardStyle}" Padding="16"
                            Visibility="{x:Bind ViewModel.HasLastSession, Mode=OneWay, Converter={StaticResource InvertBoolToVisibilityConverter}}">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                            <FontIcon Glyph="&#xE946;" FontSize="32" Foreground="{StaticResource TextSecondaryBrush}"
                                      HorizontalAlignment="Center"/>
                            <TextBlock Text="No session data yet" FontSize="14"
                                       Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                            <TextBlock Text="Enable Game Mode to see results" FontSize="12"
                                       Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- Target Apps List -->
            <StackPanel Grid.Row="5" Spacing="8">
                <StackPanel Style="{StaticResource SectionHeaderWithAccentStyle}">
                    <Border Style="{StaticResource AccentBarStyle}" Height="20"/>
                    <TextBlock Text="TARGET APPLICATIONS" Style="{StaticResource SectionHeaderStyle}" Margin="0"/>
                </StackPanel>

                <Border Style="{StaticResource CardStyle}" Padding="16">
                    <StackPanel Spacing="8">
                        <TextBlock Text="These apps will be closed when Game Mode is enabled:"
                                   FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                        <ItemsControl ItemsSource="{x:Bind ViewModel.TargetApps, Mode=OneWay}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal" Spacing="8"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate x:DataType="x:String">
                                    <Border Background="{StaticResource CardBrush}" CornerRadius="4" Padding="10,6">
                                        <TextBlock Text="{x:Bind}" FontSize="12" Foreground="{StaticResource TextPrimaryBrush}"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Page>
