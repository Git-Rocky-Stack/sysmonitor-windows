<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SysMonitor.App.Views.WiFiPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SysMonitor.App.Views"
    xmlns:vm="using:SysMonitor.App.ViewModels"
    Background="Transparent">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Padding="24" Spacing="16">
            <!-- Header -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel>
                    <TextBlock Text="WiFi Analyzer" FontSize="28" FontWeight="SemiBold" Foreground="White"/>
                    <TextBlock Text="Scan and analyze WiFi networks" FontSize="14" Foreground="#808080" Margin="0,4,0,0"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                    <Button Command="{x:Bind ViewModel.ScanNetworksCommand}" IsEnabled="{x:Bind ViewModel.IsAvailable, Mode=OneWay}"
                            Style="{StaticResource AccentButtonStyle}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                            <TextBlock Text="Scan Networks"/>
                        </StackPanel>
                    </Button>
                    <Button Command="{x:Bind ViewModel.StopScanCommand}" Visibility="{x:Bind ViewModel.IsScanning, Mode=OneWay}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE71A;" FontSize="14"/>
                            <TextBlock Text="Stop"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Adapter & Connection Row -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Adapter Info -->
                <Border Background="#0A0A0A" CornerRadius="8" Padding="20" Margin="0,0,8,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="WiFi Adapter" FontSize="12" Foreground="#808080"/>
                            <TextBlock Text="{x:Bind ViewModel.AdapterName, Mode=OneWay}" FontSize="18" FontWeight="SemiBold" Foreground="White" Margin="0,4,0,0" TextTrimming="CharacterEllipsis"/>
                            <TextBlock Text="{x:Bind ViewModel.MacAddress, Mode=OneWay}" FontSize="11" Foreground="#606060" Margin="0,4,0,0"/>
                        </StackPanel>
                        <Border Grid.Column="1" Background="{x:Bind ViewModel.AdapterStatusColor, Mode=OneWay}" CornerRadius="4" Padding="12,6" VerticalAlignment="Center">
                            <TextBlock Text="{x:Bind ViewModel.AdapterStatus, Mode=OneWay}" FontSize="12" FontWeight="SemiBold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Current Connection -->
                <Border Grid.Column="1" Background="#0A0A0A" CornerRadius="8" Padding="20" Margin="8,0,0,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Connected To" FontSize="12" Foreground="#808080"/>
                            <TextBlock Text="{x:Bind ViewModel.ConnectedNetwork, Mode=OneWay}" FontSize="18" FontWeight="SemiBold" Foreground="White" Margin="0,4,0,0" TextTrimming="CharacterEllipsis"/>
                            <StackPanel Orientation="Horizontal" Spacing="16" Margin="0,4,0,0" Visibility="{x:Bind ViewModel.IsConnected, Mode=OneWay}">
                                <TextBlock Text="{x:Bind ViewModel.ConnectionChannel, Mode=OneWay}" FontSize="11" Foreground="#606060"/>
                                <TextBlock Text="{x:Bind ViewModel.ConnectionSpeed, Mode=OneWay}" FontSize="11" Foreground="#606060"/>
                            </StackPanel>
                        </StackPanel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Visibility="{x:Bind ViewModel.IsConnected, Mode=OneWay}">
                            <TextBlock FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Foreground="{x:Bind ViewModel.ConnectionStatusColor, Mode=OneWay}">
                                <Run Text="{x:Bind ViewModel.ConnectionSignal, Mode=OneWay}"/><Run Text="%"/>
                            </TextBlock>
                            <TextBlock Text="Signal" FontSize="11" Foreground="#606060" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Stats Cards -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Background="#0A0A0A" CornerRadius="8" Padding="16" Margin="0,0,4,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="Networks" FontSize="11" Foreground="#808080" HorizontalAlignment="Center"/>
                        <TextBlock Text="{x:Bind ViewModel.NetworksFound, Mode=OneWay}" FontSize="28" FontWeight="Bold" Foreground="#00BCD4" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="1" Background="#0A0A0A" CornerRadius="8" Padding="16" Margin="4,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="Secure" FontSize="11" Foreground="#808080" HorizontalAlignment="Center"/>
                        <TextBlock Text="{x:Bind ViewModel.SecureNetworks, Mode=OneWay}" FontSize="28" FontWeight="Bold" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="2" Background="#0A0A0A" CornerRadius="8" Padding="16" Margin="4,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="Open" FontSize="11" Foreground="#808080" HorizontalAlignment="Center"/>
                        <TextBlock Text="{x:Bind ViewModel.OpenNetworks, Mode=OneWay}" FontSize="28" FontWeight="Bold" Foreground="#FF9800" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="3" Background="#0A0A0A" CornerRadius="8" Padding="16" Margin="4,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="2.4 GHz" FontSize="11" Foreground="#808080" HorizontalAlignment="Center"/>
                        <TextBlock Text="{x:Bind ViewModel.Networks24GHz, Mode=OneWay}" FontSize="28" FontWeight="Bold" Foreground="#9C27B0" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="4" Background="#0A0A0A" CornerRadius="8" Padding="16" Margin="4,0,0,0" BorderBrush="#1A1A1A" BorderThickness="1">
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="5 GHz" FontSize="11" Foreground="#808080" HorizontalAlignment="Center"/>
                        <TextBlock Text="{x:Bind ViewModel.Networks5GHz, Mode=OneWay}" FontSize="28" FontWeight="Bold" Foreground="#2196F3" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Scan Status -->
            <Border Background="#0A0A0A" CornerRadius="8" Padding="16" BorderBrush="#1A1A1A" BorderThickness="1"
                    Visibility="{x:Bind ViewModel.IsScanning, Mode=OneWay}">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <ProgressRing IsActive="True" Width="20" Height="20"/>
                    <TextBlock Text="{x:Bind ViewModel.ScanStatus, Mode=OneWay}" Foreground="#808080" VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Networks List -->
            <Border Background="#0A0A0A" CornerRadius="8" Padding="20" BorderBrush="#1A1A1A" BorderThickness="1" MinHeight="350">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Available Networks" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,16"/>

                    <ListView Grid.Row="1" ItemsSource="{x:Bind ViewModel.Networks, Mode=OneWay}"
                              Background="Transparent" SelectionMode="None">
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="vm:WiFiNetworkDisplay">
                                <Border Background="#141414" CornerRadius="6" Padding="16" Margin="0,4">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Signal Icon -->
                                        <Border Background="#1A1A1A" CornerRadius="8" Width="48" Height="48" VerticalAlignment="Center">
                                            <FontIcon Glyph="{x:Bind SignalIcon}" Foreground="{x:Bind SignalColor}" FontSize="20"/>
                                        </Border>

                                        <!-- Network Info -->
                                        <StackPanel Grid.Column="1" Margin="16,0" VerticalAlignment="Center">
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <TextBlock Text="{x:Bind Ssid}" FontSize="14" FontWeight="SemiBold" Foreground="White"/>
                                                <FontIcon Glyph="{x:Bind SecurityIcon}" Foreground="{x:Bind SecurityColor}" FontSize="12" VerticalAlignment="Center"/>
                                            </StackPanel>
                                            <TextBlock FontSize="12" Foreground="#808080" Margin="0,2,0,0">
                                                <Run Text="{x:Bind Security}"/> - <Run Text="{x:Bind Band}"/>
                                            </TextBlock>
                                            <TextBlock Text="{x:Bind Bssid}" FontSize="11" Foreground="#606060" Margin="0,2,0,0"/>
                                        </StackPanel>

                                        <!-- Channel -->
                                        <StackPanel Grid.Column="2" Margin="16,0" VerticalAlignment="Center" HorizontalAlignment="Center" MinWidth="60">
                                            <TextBlock Text="Channel" FontSize="11" Foreground="#606060" HorizontalAlignment="Center"/>
                                            <TextBlock Text="{x:Bind Channel}" FontSize="16" FontWeight="Bold" Foreground="#9C27B0" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <!-- Frequency -->
                                        <StackPanel Grid.Column="3" Margin="16,0" VerticalAlignment="Center" HorizontalAlignment="Center" MinWidth="80">
                                            <TextBlock Text="Frequency" FontSize="11" Foreground="#606060" HorizontalAlignment="Center"/>
                                            <TextBlock Text="{x:Bind Frequency}" FontSize="12" FontWeight="SemiBold" Foreground="#2196F3" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <!-- Signal Strength -->
                                        <StackPanel Grid.Column="4" VerticalAlignment="Center" HorizontalAlignment="Center" MinWidth="60">
                                            <TextBlock FontSize="20" FontWeight="Bold" HorizontalAlignment="Center" Foreground="{x:Bind SignalColor}">
                                                <Run Text="{x:Bind SignalStrength}"/><Run Text="%" FontSize="12"/>
                                            </TextBlock>
                                            <ProgressBar Value="{x:Bind SignalStrength}" Maximum="100" Width="50" Height="4" Margin="0,4,0,0"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <!-- Empty State -->
                    <StackPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center"
                                Visibility="{x:Bind ViewModel.NetworksFound, Mode=OneWay, Converter={StaticResource ZeroToVisibilityConverter}}">
                        <FontIcon Glyph="&#xE701;" FontSize="48" Foreground="#404040"/>
                        <TextBlock Text="No WiFi networks found" FontSize="14" Foreground="#606060" Margin="0,12,0,0"/>
                        <TextBlock Text="Click 'Scan Networks' to search for available networks" FontSize="12" Foreground="#404040" Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
