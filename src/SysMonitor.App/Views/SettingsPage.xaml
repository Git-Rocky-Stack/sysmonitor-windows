<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SysMonitor.App.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Spacing="24" Padding="0,0,0,24">
            <TextBlock Text="Settings" Style="{StaticResource PageHeaderStyle}"/>

            <!-- Appearance -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="Appearance" Style="{StaticResource SectionHeaderStyle}"/>
                    <ComboBox Header="Theme" SelectedIndex="{x:Bind ViewModel.SelectedThemeIndex, Mode=TwoWay}" Width="200">
                        <ComboBoxItem Content="System Default"/>
                        <ComboBoxItem Content="Light"/>
                        <ComboBoxItem Content="Dark"/>
                    </ComboBox>
                </StackPanel>
            </Border>

            <!-- Behavior -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="Behavior" Style="{StaticResource SectionHeaderStyle}"/>
                    <ToggleSwitch Header="Run at Windows startup" IsOn="{x:Bind ViewModel.RunAtStartup, Mode=TwoWay}"/>
                    <ToggleSwitch Header="Minimize to system tray" IsOn="{x:Bind ViewModel.MinimizeToTray, Mode=TwoWay}"/>
                    <ToggleSwitch Header="Show notifications" IsOn="{x:Bind ViewModel.ShowNotifications, Mode=TwoWay}"/>
                </StackPanel>
            </Border>

            <!-- Monitoring -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="16">
                    <TextBlock Text="Monitoring" Style="{StaticResource SectionHeaderStyle}"/>
                    <Slider Header="Refresh interval (seconds)" Minimum="1" Maximum="10" Value="{x:Bind ViewModel.RefreshInterval, Mode=TwoWay}" Width="300"/>
                    <ToggleSwitch Header="Auto-optimize memory when usage exceeds threshold" IsOn="{x:Bind ViewModel.AutoOptimizeMemory, Mode=TwoWay}"/>
                    <Slider Header="Memory threshold (%)" Minimum="50" Maximum="95" Value="{x:Bind ViewModel.MemoryThreshold, Mode=TwoWay}" Width="300"
                            Visibility="{x:Bind ViewModel.AutoOptimizeMemory, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
                </StackPanel>
            </Border>

            <!-- About -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel Spacing="8">
                    <TextBlock Text="About" Style="{StaticResource SectionHeaderStyle}"/>
                    <TextBlock Text="SysMonitor for Windows" FontWeight="SemiBold"/>
                    <TextBlock Text="{x:Bind ViewModel.Version, Mode=OneWay}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Text="Windows System Monitor and Optimizer" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>

            <!-- Actions -->
            <StackPanel Orientation="Horizontal" Spacing="8">
                <Button Content="Save Settings" Command="{x:Bind ViewModel.SaveSettingsCommand}" Style="{StaticResource AccentButtonStyle}"/>
                <Button Content="Reset to Defaults" Command="{x:Bind ViewModel.ResetSettingsCommand}"/>
            </StackPanel>

            <TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>
    </ScrollViewer>
</Page>
